<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Design View</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link href="lib/font-wso2_1.1.0/css/font-wso2.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="css/sequence_diagram/sequenced-styles.css" />
    <link rel="stylesheet" type="text/css" href="css/diagram/diagram-tool-bar.css" />
    <link rel="stylesheet" type="text/css" href="css/diagram/preview-pane.css" />
    <link rel="stylesheet" type="text/css" href="lib/bootstrap_v3.3.6/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="lib/jquery-ui_v1.12.1/jquery-ui.css" />
    <link rel="stylesheet" type="text/css" href="css/styles.css" />
    <link rel="stylesheet" type="text/css" href="css/app.css" />
</head>

<body>

<div id="container">
    <div id="design-editor">
        <div class="shapes-container">
            <div id="toolpalatte"></div>
        </div>
        <div class="editor-container" id="editorBottom">
            <div id="sample">
                <ul class="nav nav-tabs tabList" id="tabList"  role="tablist">
                    <li class=".additionbtn"><a href="#" class="add-resource">+</a></li>
                </ul>
            </div>

            <script type="text/template" id="resourceTabsTemplate">

                    <a href="<%=hrefId%>"aria-controls="<%=resourceId%>" role="tab"  data-toggle="tab"><%=resourceTitle%></a>
                    <span class="remove-resource fw-stack">
                        <i class="icon fw fw-circle fw-stack-2x"></i>
                        <i class="fw fw-cancel fw-stack-1x fw-inverse"></i>
                    </span>

                </script>
            <script type="text/template" id="resourceContentTemplate">
                <div  role="tabpanel" class="tab-pane  gradient-pattern tab-divs" id="<%=resourceId%>"></div>
                </script>

            <div class="editor-scroller">
                <div id="udcontroldiv" >
                    <img id="edit-image" alt="edit" src="images/edit.svg" class="udcontrol-image"/>
                    <img id="delete-image" alt="delete" src="images/delete.svg" class="udcontrol-image"/>
                    <div id="udcModal" style="display:none;"></div>
                </div>
                <div class="editor">
                    <div class="tab-content resource-content ">

                    </div>
                </div>
            </div>
        </div>
        <div class="property-container" id="property-container1">
            <div class="preview-container">
            </div>
            <div id="expandcolapseDiv" style="float: left;" >
                <img id="expand-image" alt="save" src="images/rightarrow.svg" class="udcontrol-image property-save" />
            </div>
                <div id="propertySave" style="float: right; padding-right: 4px; padding-top: 4px; display:none" >
                    <img id="save-image" alt="save" src="images/save.svg" class="udcontrol-image property-save" />
                    Save
                </div>
                <div id="propertyPaneContainer" style="padding-top: 8px;">
                    <div id="propertyPane"></div>
                </div>
        </div>
    </div>
</div>

<!-- Third party js libs -->
<script src="lib/jquery_v1.9.1/jquery.js"></script>
<!-- custom download of jquery-ui which has onlt drag and drop components can be download from here
http://jqueryui.com/download/#!version=1.12.0&themeParams=none&components=101000000100110000000000010000000000000000000000
-->
<script src="lib/jquery-ui_v1.12.1/jquery-ui.js"></script>
<script src="lib/bootstrap_v3.3.6/js/bootstrap.js"></script>
<script src="lib/lodash_v4.13.1/lodash.js"></script>
<script src="lib/backbone_v1.3.3/backbone.js"></script>
<script src="lib/backbone_storage_adapter_v1.1.0/backbone.localStorage.js"></script>
<script src="lib/d3_v4.1.1/d3.js"></script>
<script src="lib/require_js/require.js"></script>
<script src="lib/jsoneditor_v0.7.28/jsoneditor.js"></script>
<script src="lib/svg-panNZoom/jquery.svg.pan.zoom.js"></script>

<!-- custom js libs -->
<script src="js/geometry/geometry-core.js"></script>
<script src="js/d3-plugin/d3-utils.js"></script>
<script src="js/diagram/diagram-model.js"></script>
<script src="js/diagram/diagram-view.js"></script>
<script src="js/diagram/diagram-utils.js"></script>
<script src="js/tool-palette/tool.js"></script>
<script src="js/tool-palette/tool-view.js"></script>
<script src="js/tool-palette/toolgroup.js"></script>
<script src="js/tool-palette/toolgroup-view.js"></script>
<script src="js/tool-palette/toolgroupwrapper.js"></script>
<script src="js/tool-palette/toolgroupwrapper-view.js"></script>
<script src="js/tool-palette/toolpalette.js"></script>
<script src="js/tool-palette/toolpalette-view.js"></script>
<script src="js/dialogs/updatedeletecontroler.js"></script>
<script src="js/dialogs/updatedeletecontroler-view.js"></script>
<script src="js/sequence_diagram/sequenced-model.js"></script>
<script src="js/property-pane/propertypane.js"></script>

<script src="js/main_elements/definitions/life-line.js"></script>
<script src="js/main_elements/definitions/life-lines/end_point.js"></script>
<script src="js/main_elements/definitions/life-lines/resource.js"></script>

<script src="js/processors/definitions/manipulators.js"></script>
<script src="js/processors/definitions/manipulators/log_mediator.js"></script>
<script src="js/processors/definitions/manipulators/payload_factory_mediator.js"></script>

<script src="js/processors/definitions/flow_controllers.js"></script>
<script src="js/processors/definitions/flow_controllers/try_block_mediator.js"></script>
<script src="js/processors/definitions/flow_controllers/switch_mediator.js"></script>
<script src="js/processors/definitions/flow_controllers/invoke_mediator.js"></script>

<script src="js/sequence_diagram/sequenced-model.js"></script>
<script src="js/sequence_diagram/sequenced-view.js"></script>
<script src="js/sequence_diagram/sequenced-utils.js"></script>
<script src="js/app.js"></script>

<script>
    var eventMethod = window.addEventListener ? "addEventListener" : "attachEvent";
    var eventer = window[eventMethod];
    var messageEvent = eventMethod == "attachEvent" ? "onmessage" : "message";

    // Listen to message
    eventer(messageEvent,function(e) {
        console.log('Design View received message!:  ',e.data);

        if (e.data == "save-config") {
            parent.postMessage(diagram.parseTree(),"*");
        } else if (e.data == "new-config") {
            diagram.reloadDiagramArea();
        } else {
            parent.postMessage(diagram.parseTree(),"*");
        }
    },false);
</script>



</body>

</html>